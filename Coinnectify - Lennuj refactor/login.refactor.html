<!doctype html>
<html lang="en">

<head>
    <!-- meta -->
    <meta charset="utf-8">
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- title -->
    <title id="title"></title>

    <!-- favicon -->
    <link rel="icon" href="favicon.ico" type="image/gif" sizes="16x16">

    <!-- font -->
    <link rel="stylesheet" href="./css/icomoon.css">

    <!-- css -->
    <link rel="stylesheet" href="./css/purecssframework.css">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>

    $(if chap-id)
    <form name="sendin" action="$(link-login-only)" method="post" style="display:none">
        <input type="hidden" name="username" />
        <input type="hidden" name="password" />
        <input type="hidden" name="dst" value="$(link-orig)" />
        <input type="hidden" name="popup" value="false" />
    </form>

    <script src="/md5.js"></script>
    <script>
        function doLogin() {
            document.sendin.username.value = document.login.username.value;
            document.sendin.password.value = hexMD5('$(chap-id)' + document.login.password.value + '$(chap-challenge)');
            document.sendin.submit();
            return false;
        }
    </script>
    $(endif)


    <div class="main-container">
        <div class="flex-grid">
            <!-- main column -->
            <div class="col-4 col-offset-4 col-6-md col-offset-3-md col-8-sm col-offset-2-sm col-12-xs col-offset-clear-xs ">
                <div class="panel-body">
                    <a href="#" onclick="insert_coin()" class="btn success full-width rounded-more-corners">
                        <h1><b>INSERT COIN</b></h1>
                    </a>
                </div><!-- /panel body -->
            </div> <!-- main column -->
        </div><!-- /flex-grid -->
    </div> <!-- /main container -->

<!-- insert coin modal -->
<input type="radio" name="insert-coin" class="hide" id="hide_insert_coin_modal" checked>
<div class="modal-container">
    <input type="radio" name="insert-coin" class="hide modal-control" id="insert_coin_modal">
    <div class="modal-shadow"></div>
    <div class="modal-wrap">
        <div class="modal text-center">
            <div class="modal-body" id="insert-coin">
                <img src="./img/insert-coin1.gif" class="img-responsive" style="height: 50px;" alt="">
                <iframe width="100%" height="320px" scrolling="no" id="frame-main"></iframe>
            </div>
        </div>
    </div>
</div>
<!-- /no click shadow Modal-->
<script>
    // window title
    var hostname = window.location.hostname;
    document.getElementById('title').innerHTML = hostname  + " > login";

    // multi vendo
    /* todo:
    1. create dropdown menu
    2. pre select current vendo
    3. create function to change insert coin iframe loader accordingly
    */

    // insert coin
    function insert_coin() {
        // <!-- CHANGE IP ADDRESS TO YOUR NODEMCU'S IP ADDRESS: REQUIRED FOR INSERT COIN -->
        document.getElementById("frame-main").setAttribute('src','http://10.0.0.252/ea74aa6e3cfe4ba5836e91da82c7d411?a9bd5a5a23485c8ccd599c0d68a573=$(mac)');
        document.getElementById("insert_coin_modal").click();
    }
    // function to trigger chain click using anchor tag
    function clicker(elementId) {
        document.getElementById(elementId).click();
    }
    // get form handlers
    var loginFormTitle = document.getElementById("login_title")
    var loginForm = document.login;
    var username = loginForm.username;
    var password = loginForm.password;

    // set password = username
    function setpass() {
        var user = username.value;
        username.value = user;
        password.value = user;
    }

    // prepare form for voucher login
    function voucher_login(){
        //change form title
        loginFormTitle.innerHTML = "Voucher Login";
        //change input type
        username.type = "tel";
        password.type = "hidden";
        //clear any input
        username.value = "";
        password.value = "";
        // set placehoder for guide
        username.placeholder = "Enter voucher here";
        //attach event to input;
        username.onkeyup = setpass;
        // open form modal
        document.getElementById("login_modal").click();
        // focus username input
        username.focus();
    }

    // prepare form for account login
    function account_login(){
        //change form title
        loginFormTitle.innerHTML = "Account Login";
        // change input type
        username.type = "text";
        password.type = "password";
        // clear any input
        username.value = "";
        password.value = "";
        // set placehoder for guide
        username.placeholder = "username";
        // remove event to input
        username.onkeyup = "";
        // open form modal
        document.getElementById("login_modal").click();
        // focus username input
        username.focus();
    }

</script>
    <div class="ie-fixMinHeight">
        <div class="main">
            <div class="wrap animated fadeIn">
                <form name="login" action="$(link-login-only)" method="post" $(if chap-id) onSubmit="return doLogin()"
                    $(endif)>
                    <input type="hidden" name="dst" value="$(link-orig)" />
                    <input type="hidden" name="popup" value="true" />
                    <!-- <svg class="logo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 174 42">
                        <path fill="#fff"
                            d="M7.32 13.66L0 41.74 3.12 41.74 9.49 15.94 9.58 15.94 15.01 41.74 18.22 41.74 36.86 16.34 36.95 16.34 30.02 41.74 33.18 41.74 40.4 13.66 35.73 13.66 17.23 38.87 11.99 13.66 7.32 13.66zM43.43 21.45L38.19 41.74 41.16 41.74 46.4 21.45 43.43 21.45zM50.68 21.45L45.5 41.74 48.47 41.74 50.36 34.39 55.55 30.77 62.02 41.74 65.27 41.74 57.91 29.28 69.43 21.45 65.46 21.45 51.21 31.36 51.12 31.28 53.66 21.45 50.68 21.45z" />
                        <path
                            d="M71.18 21.45L65.94 41.74h3l2.74-10.62c1-3.81 3.82-7.39 9.16-7.47.56 0 1.13 0 1.7 0l.66-2.48c-.52 0-1.09 0-1.61 0-4.34 0-6.94 2-8.82 5h-.1l1.23-4.68zM103.8 28.8c0-5-4-7.94-9.63-7.94-8.69 0-13.59 6.37-13.59 13 0 5.07 3.44 8.45 9.72 8.45 9 0 13.5-6.68 13.5-13.53m-3 .52c0 4.72-3.44 10.93-9.95 10.93-5 0-7.32-2.68-7.32-6.61 0-4.76 3.59-10.7 10.1-10.7 4.77 0 7.17 2.6 7.17 6.38M132.33 21.43L134.26 13.66 105.19 13.66 103.27 21.45 112.59 21.45 112.59 21.45 122.99 21.45 122.99 21.45 132.33 21.43zM111.67 25.17L107.55 41.74 117.93 41.74 122.06 25.17 122.06 25.16 111.67 25.16 111.67 25.17zM134 25.17l-4.11 16.57h9.35l4.1-16.57zm10.28-3.73l1.94-7.78h-9.34l-2 7.79zM150.09 13.66L143.11 41.74 152.45 41.74 153.91 35.92 156.04 34.34 159.34 41.74 169.49 41.74 163.26 29.55 174.26 21.33 163.07 21.33 156.18 27.3 156.09 27.3 159.44 13.66 150.09 13.66zM47.45 0c1.14 7.93 5.39 12.74 14.07 13.14A10.69 10.69 0 0 1 47.45 0"
                            fill="#fff" fill-rule="evenodd" />
                        <path
                            d="M42.91,1.4c.1,0,.11,0,.12.11A16.55,16.55,0,0,0,48.26,13a16.6,16.6,0,0,0,12,4.66c-10,4-20.55-5.6-17.33-16.28"
                            fill="#fff" fill-rule="evenodd" />
                        </svg> -->


                    <p class="info $(if error)alert$(endif)">
                        $(if error == "")Please log in to use the internet hotspot service $(if trial ==
                        'yes')<br />Free trial available, <a
                            href="$(link-login-only)?dst=$(link-orig-esc)&amp;username=T-$(mac-esc)">click
                            here</a>.$(endif)
                        $(endif)

                        $(if error)$(error)$(endif)
                    </p>
                    <label>
                        <img class="ico" src="img/user.svg" alt="#" />
                        <input name="username" type="text" value="$(username)" placeholder="Username" />
                    </label>

                    <label>
                        <img class="ico" src="img/password.svg" alt="#" />
                        <input name="password" type="password" placeholder="Password" />
                    </label>

                    <input type="submit" value="Connect" />

                </form>
                <p class="info bt">Powered by MikroTik RouterOS</p>

            </div>
        </div>
    </div>

</body>

</html>